<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>13 Geocode and map newspaper titles | R for Newspaper Data</title>
  <meta name="description" content="This is a book to help new and existing users find, process and analyse historical newspaper data, using the programming language R-Studio." />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="13 Geocode and map newspaper titles | R for Newspaper Data" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a book to help new and existing users find, process and analyse historical newspaper data, using the programming language R-Studio." />
  <meta name="github-repo" content="yannryanBL/r-for-news-data" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="13 Geocode and map newspaper titles | R for Newspaper Data" />
  
  <meta name="twitter:description" content="This is a book to help new and existing users find, process and analyse historical newspaper data, using the programming language R-Studio." />
  

<meta name="author" content="Yann Ryan" />


<meta name="date" content="2020-01-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="network-analysis-with-curated-seventeenth-century-dataset.html"/>
<link rel="next" href="text-mining.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface &amp; Acknowledgements</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#unlocking-the-past-with-newspaper-data"><i class="fa fa-check"></i><b>2.1</b> Unlocking the past with newspaper data</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#what-is-newspaper-data"><i class="fa fa-check"></i><b>2.2</b> What is newspaper data?</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#why-is-it-useful"><i class="fa fa-check"></i><b>2.3</b> Why is it useful?</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#short-history-of-newspapers-newspaper-digitisation"><i class="fa fa-check"></i><b>2.4</b> Short history of newspapers, newspaper digitisation?</a><ul>
<li class="chapter" data-level="2.4.1" data-path="introduction.html"><a href="introduction.html#burney-and-eebo"><i class="fa fa-check"></i><b>2.4.1</b> Burney and EEBO?</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction.html"><a href="introduction.html#jisc-1"><i class="fa fa-check"></i><b>2.4.2</b> JISC 1</a></li>
<li class="chapter" data-level="2.4.3" data-path="introduction.html"><a href="introduction.html#jisc-2"><i class="fa fa-check"></i><b>2.4.3</b> JISC 2</a></li>
<li class="chapter" data-level="2.4.4" data-path="introduction.html"><a href="introduction.html#bna"><i class="fa fa-check"></i><b>2.4.4</b> BNA</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction.html"><a href="introduction.html#goals"><i class="fa fa-check"></i><b>2.5</b> Goals</a></li>
<li class="chapter" data-level="2.6" data-path="introduction.html"><a href="introduction.html#format-of-the-book---bookdown-and-github"><i class="fa fa-check"></i><b>2.6</b> Format of the book - bookdown and github</a></li>
<li class="chapter" data-level="2.7" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i><b>2.7</b> Why R?</a><ul>
<li class="chapter" data-level="2.7.1" data-path="introduction.html"><a href="introduction.html#who-uses-r"><i class="fa fa-check"></i><b>2.7.1</b> Who uses R?</a></li>
<li class="chapter" data-level="2.7.2" data-path="introduction.html"><a href="introduction.html#the-tidyverse"><i class="fa fa-check"></i><b>2.7.2</b> The Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="introduction.html"><a href="introduction.html#who-is-the-book-for"><i class="fa fa-check"></i><b>2.8</b> Who is the book for?</a></li>
<li class="chapter" data-level="2.9" data-path="introduction.html"><a href="introduction.html#format-of-the-book"><i class="fa fa-check"></i><b>2.9</b> Format of the book</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html"><i class="fa fa-check"></i><b>3</b> How to use this book</a><ul>
<li class="chapter" data-level="3.1" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html#what-is-this"><i class="fa fa-check"></i><b>3.1</b> What is this?</a></li>
<li class="chapter" data-level="3.2" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html#make-changes-directly-to-the-markdown-files-on-github."><i class="fa fa-check"></i><b>3.2</b> Make changes directly to the markdown files on Github.</a></li>
<li class="chapter" data-level="3.3" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html#download-a-copy"><i class="fa fa-check"></i><b>3.3</b> Download a copy</a></li>
<li class="chapter" data-level="3.4" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html#download-r-and-r-studio"><i class="fa fa-check"></i><b>3.4</b> Download R and R-Studio</a></li>
<li class="chapter" data-level="3.5" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html#licence-terms"><i class="fa fa-check"></i><b>3.5</b> Licence terms</a></li>
<li class="chapter" data-level="3.6" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html#clone-a-copy-to-github"><i class="fa fa-check"></i><b>3.6</b> Clone a copy to GitHub</a></li>
<li class="chapter" data-level="3.7" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html#make-your-own-version"><i class="fa fa-check"></i><b>3.7</b> Make your own version</a></li>
</ul></li>
<li class="part"><span><b>I Part I: Sources and data</b></span></li>
<li class="chapter" data-level="4" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html"><i class="fa fa-check"></i><b>4</b> Newspaper data - international</a><ul>
<li class="chapter" data-level="4.1" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#uk"><i class="fa fa-check"></i><b>4.1</b> UK</a><ul>
<li class="chapter" data-level="4.1.1" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#british-newspaper-archive"><i class="fa fa-check"></i><b>4.1.1</b> British newspaper archive</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#outside-uk"><i class="fa fa-check"></i><b>4.2</b> Outside UK:</a><ul>
<li class="chapter" data-level="4.2.1" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#chronicling-america"><i class="fa fa-check"></i><b>4.2.1</b> Chronicling America</a></li>
<li class="chapter" data-level="4.2.2" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#delpher"><i class="fa fa-check"></i><b>4.2.2</b> Delpher</a></li>
<li class="chapter" data-level="4.2.3" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#eluxemburgensia"><i class="fa fa-check"></i><b>4.2.3</b> Eluxemburgensia</a></li>
<li class="chapter" data-level="4.2.4" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#europeana"><i class="fa fa-check"></i><b>4.2.4</b> Europeana</a></li>
<li class="chapter" data-level="4.2.5" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#finnish-newspaper-database"><i class="fa fa-check"></i><b>4.2.5</b> Finnish Newspaper Database</a></li>
<li class="chapter" data-level="4.2.6" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#gallica"><i class="fa fa-check"></i><b>4.2.6</b> Gallica</a></li>
<li class="chapter" data-level="4.2.7" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#trove"><i class="fa fa-check"></i><b>4.2.7</b> Trove</a></li>
<li class="chapter" data-level="4.2.8" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#papers-past"><i class="fa fa-check"></i><b>4.2.8</b> Papers Past</a></li>
<li class="chapter" data-level="4.2.9" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#hemeroteca-nacional-digital-de-mexico"><i class="fa fa-check"></i><b>4.2.9</b> Hemeroteca Nacional Digital de Mexico</a></li>
<li class="chapter" data-level="4.2.10" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#belgica-press"><i class="fa fa-check"></i><b>4.2.10</b> Belgica Press</a></li>
<li class="chapter" data-level="4.2.11" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#welsh-newspaper-archive"><i class="fa fa-check"></i><b>4.2.11</b> Welsh Newspaper Archive</a></li>
<li class="chapter" data-level="4.2.12" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#national-library-of-scotland"><i class="fa fa-check"></i><b>4.2.12</b> National Library of Scotland</a></li>
<li class="chapter" data-level="4.2.13" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#italian-newspapers"><i class="fa fa-check"></i><b>4.2.13</b> Italian newspapers</a></li>
<li class="chapter" data-level="4.2.14" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#hemeroteca-digital-spain"><i class="fa fa-check"></i><b>4.2.14</b> Hemeroteca Digital (Spain)</a></li>
<li class="chapter" data-level="4.2.15" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#anno---austrian-newspapers-online"><i class="fa fa-check"></i><b>4.2.15</b> ANNO - Austrian Newspapers Online</a></li>
<li class="chapter" data-level="4.2.16" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#bc-historical-newspapers"><i class="fa fa-check"></i><b>4.2.16</b> BC Historical Newspapers</a></li>
<li class="chapter" data-level="4.2.17" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#media-stream"><i class="fa fa-check"></i><b>4.2.17</b> Media Stream</a></li>
<li class="chapter" data-level="4.2.18" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#stare-hrvatske-novine"><i class="fa fa-check"></i><b>4.2.18</b> Stare hrvatske novine</a></li>
<li class="chapter" data-level="4.2.19" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#zefys"><i class="fa fa-check"></i><b>4.2.19</b> ZEFYS</a></li>
<li class="chapter" data-level="4.2.20" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#timarit.is"><i class="fa fa-check"></i><b>4.2.20</b> Timarit.is</a></li>
<li class="chapter" data-level="4.2.21" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#google-news-archive"><i class="fa fa-check"></i><b>4.2.21</b> Google news archive</a></li>
<li class="chapter" data-level="4.2.22" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#baltic-digital-library"><i class="fa fa-check"></i><b>4.2.22</b> Baltic Digital Library</a></li>
<li class="chapter" data-level="4.2.23" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#newspapersg"><i class="fa fa-check"></i><b>4.2.23</b> NewspaperSG</a></li>
<li class="chapter" data-level="4.2.24" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#svenska-dagstidningar"><i class="fa fa-check"></i><b>4.2.24</b> Svenska dagstidningar</a></li>
<li class="chapter" data-level="4.2.25" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#handwritten-newspapers-project"><i class="fa fa-check"></i><b>4.2.25</b> Handwritten Newspapers Project</a></li>
<li class="chapter" data-level="4.2.26" data-path="newspaper-data-international.html"><a href="newspaper-data-international.html#the-medici-archive-project"><i class="fa fa-check"></i><b>4.2.26</b> The Medici Archive Project</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html"><i class="fa fa-check"></i><b>5</b> UK Newspaper Data</a><ul>
<li class="chapter" data-level="5.1" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#what-access-do-you-need"><i class="fa fa-check"></i><b>5.1</b> What access do you need?</a><ul>
<li class="chapter" data-level="5.1.1" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#want-to-find-individual-articles."><i class="fa fa-check"></i><b>5.1.1</b> Want to find individual articles.</a></li>
<li class="chapter" data-level="5.1.2" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#want-to-do-text-mining-on-a-large-corpus"><i class="fa fa-check"></i><b>5.1.2</b> Want to do text mining on a large corpus</a></li>
<li class="chapter" data-level="5.1.3" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#want-to-do-text-mining-on-the-entire-digitised-collection"><i class="fa fa-check"></i><b>5.1.3</b> Want to do text mining on the entire digitised collection</a></li>
<li class="chapter" data-level="5.1.4" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#want-to-do-something-involving-the-images-such-as-computer-vision-techniques"><i class="fa fa-check"></i><b>5.1.4</b> Want to do something involving the images, such as computer vision techniques,</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#intro-to-british-library-newspapers"><i class="fa fa-check"></i><b>5.2</b> Intro to British Library Newspapers</a></li>
<li class="chapter" data-level="5.3" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#eebotcp"><i class="fa fa-check"></i><b>5.3</b> EEBO/TCP</a></li>
<li class="chapter" data-level="5.4" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#burney-collection"><i class="fa fa-check"></i><b>5.4</b> Burney Collection</a></li>
<li class="chapter" data-level="5.5" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#jisc-newspaper-digitisation-projects"><i class="fa fa-check"></i><b>5.5</b> JISC Newspaper digitisation projects</a></li>
<li class="chapter" data-level="5.6" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#british-newspaper-archive-1"><i class="fa fa-check"></i><b>5.6</b> BRITISH NEWSPAPER ARCHIVE</a></li>
<li class="chapter" data-level="5.7" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#gale"><i class="fa fa-check"></i><b>5.7</b> GALE</a><ul>
<li class="chapter" data-level="5.7.1" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#getting-access-to-gale-data---experience-of-others"><i class="fa fa-check"></i><b>5.7.1</b> Getting access to GALE data - experience of others</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#hmd-data--on-repository"><i class="fa fa-check"></i><b>5.8</b> HMD data- on repository</a><ul>
<li class="chapter" data-level="5.8.1" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#project-goals"><i class="fa fa-check"></i><b>5.8.1</b> Project goals</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="uk-newspaper-data.html"><a href="uk-newspaper-data.html#luxembourg-data"><i class="fa fa-check"></i><b>5.9</b> Luxembourg data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-formats.html"><a href="data-formats.html"><i class="fa fa-check"></i><b>6</b> Data formats</a><ul>
<li class="chapter" data-level="6.1" data-path="data-formats.html"><a href="data-formats.html#xml---different-flavours"><i class="fa fa-check"></i><b>6.1</b> XML - different flavours</a></li>
<li class="chapter" data-level="6.2" data-path="data-formats.html"><a href="data-formats.html#cqpweb-newspaper-corpora"><i class="fa fa-check"></i><b>6.2</b> CQPWeb newspaper corpora</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ocr-and-its-problems.html"><a href="ocr-and-its-problems.html"><i class="fa fa-check"></i><b>7</b> OCR and its problems</a><ul>
<li class="chapter" data-level="7.1" data-path="ocr-and-its-problems.html"><a href="ocr-and-its-problems.html#what-is-ocr"><i class="fa fa-check"></i><b>7.1</b> What is OCR?</a></li>
<li class="chapter" data-level="7.2" data-path="ocr-and-its-problems.html"><a href="ocr-and-its-problems.html#what-is-it-like-in-bl-newspapers"><i class="fa fa-check"></i><b>7.2</b> What is it like in BL newspapers?</a></li>
<li class="chapter" data-level="7.3" data-path="ocr-and-its-problems.html"><a href="ocr-and-its-problems.html#what-information-do-we-have-on-ocr"><i class="fa fa-check"></i><b>7.3</b> What information do we have on OCR?</a><ul>
<li class="chapter" data-level="7.3.1" data-path="ocr-and-its-problems.html"><a href="ocr-and-its-problems.html#error-rate"><i class="fa fa-check"></i><b>7.3.1</b> Error rate</a></li>
<li class="chapter" data-level="7.3.2" data-path="ocr-and-its-problems.html"><a href="ocr-and-its-problems.html#ground-truth---testing-against-transcription"><i class="fa fa-check"></i><b>7.3.2</b> Ground truth - testing against transcription</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="ocr-and-its-problems.html"><a href="ocr-and-its-problems.html#impact-on-analysis"><i class="fa fa-check"></i><b>7.4</b> Impact on analysis</a></li>
</ul></li>
<li class="part"><span><b>II Part I: Basic data methods</b></span></li>
<li class="chapter" data-level="8" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>8</b> Methods</a><ul>
<li class="chapter" data-level="8.1" data-path="methods.html"><a href="methods.html#mapping-seventeenth-century-newsbooks"><i class="fa fa-check"></i><b>8.1</b> Mapping seventeenth century newsbooks</a><ul>
<li class="chapter" data-level="8.1.1" data-path="methods.html"><a href="methods.html#mapping-with-r"><i class="fa fa-check"></i><b>8.1.1</b> Mapping with R</a></li>
<li class="chapter" data-level="8.1.2" data-path="methods.html"><a href="methods.html#steps"><i class="fa fa-check"></i><b>8.1.2</b> Steps</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="methods.html"><a href="methods.html#network-analysis-of-seventeenth-century-newsbooks"><i class="fa fa-check"></i><b>8.2</b> Network analysis of seventeenth century newsbooks</a><ul>
<li class="chapter" data-level="8.2.1" data-path="methods.html"><a href="methods.html#background"><i class="fa fa-check"></i><b>8.2.1</b> Background</a></li>
<li class="chapter" data-level="8.2.2" data-path="methods.html"><a href="methods.html#network-analysis"><i class="fa fa-check"></i><b>8.2.2</b> Network analysis</a></li>
<li class="chapter" data-level="8.2.3" data-path="methods.html"><a href="methods.html#steps-1"><i class="fa fa-check"></i><b>8.2.3</b> Steps</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="methods.html"><a href="methods.html#network-analysis-using-nlp-and-lancaster-newsbooks"><i class="fa fa-check"></i><b>8.3</b> Network analysis using NLP and Lancaster newsbooks</a><ul>
<li class="chapter" data-level="8.3.1" data-path="methods.html"><a href="methods.html#background-1"><i class="fa fa-check"></i><b>8.3.1</b> Background</a></li>
<li class="chapter" data-level="8.3.2" data-path="methods.html"><a href="methods.html#sources-used"><i class="fa fa-check"></i><b>8.3.2</b> Sources used</a></li>
<li class="chapter" data-level="8.3.3" data-path="methods.html"><a href="methods.html#steps-2"><i class="fa fa-check"></i><b>8.3.3</b> Steps</a></li>
<li class="chapter" data-level="8.3.4" data-path="methods.html"><a href="methods.html#choropleth-maps---nineteenth-century"><i class="fa fa-check"></i><b>8.3.4</b> Choropleth maps - nineteenth century</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html"><i class="fa fa-check"></i><b>9</b> R and the Tidyverse</a><ul>
<li class="chapter" data-level="9.1" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#r"><i class="fa fa-check"></i><b>9.1</b> R</a><ul>
<li class="chapter" data-level="9.1.1" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#base-r-commands"><i class="fa fa-check"></i><b>9.1.1</b> Base R commands</a></li>
<li class="chapter" data-level="9.1.2" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#r-studio"><i class="fa fa-check"></i><b>9.1.2</b> R studio</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>9.2</b> Tidyverse</a><ul>
<li class="chapter" data-level="9.2.1" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#select-pull"><i class="fa fa-check"></i><b>9.2.1</b> Select, pull</a></li>
<li class="chapter" data-level="9.2.2" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#group_by-tally-summarise"><i class="fa fa-check"></i><b>9.2.2</b> group_by, tally, summarise</a></li>
<li class="chapter" data-level="9.2.3" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#filter"><i class="fa fa-check"></i><b>9.2.3</b> filter</a></li>
<li class="chapter" data-level="9.2.4" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#sort-arrange-top_n"><i class="fa fa-check"></i><b>9.2.4</b> sort, arrange, top_n</a></li>
<li class="chapter" data-level="9.2.5" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#piping"><i class="fa fa-check"></i><b>9.2.5</b> Piping</a></li>
<li class="chapter" data-level="9.2.6" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#plotting"><i class="fa fa-check"></i><b>9.2.6</b> Plotting</a></li>
<li class="chapter" data-level="9.2.7" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#doing-this-with-newspaper-data"><i class="fa fa-check"></i><b>9.2.7</b> Doing this with newspaper data</a></li>
<li class="chapter" data-level="9.2.8" data-path="r-and-the-tidyverse.html"><a href="r-and-the-tidyverse.html#other-relevant-stuff-particularly-for-historians"><i class="fa fa-check"></i><b>9.2.8</b> Other relevant stuff, particularly for historians</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>10</b> Regular expressions</a></li>
<li class="chapter" data-level="11" data-path="charting-over-time-with-a-curated-dataset.html"><a href="charting-over-time-with-a-curated-dataset.html"><i class="fa fa-check"></i><b>11</b> Charting over time with a curated dataset</a><ul>
<li class="chapter" data-level="11.1" data-path="charting-over-time-with-a-curated-dataset.html"><a href="charting-over-time-with-a-curated-dataset.html#where-to-download"><i class="fa fa-check"></i><b>11.1</b> Where to download</a></li>
<li class="chapter" data-level="11.2" data-path="charting-over-time-with-a-curated-dataset.html"><a href="charting-over-time-with-a-curated-dataset.html#time"><i class="fa fa-check"></i><b>11.2</b> Time</a></li>
<li class="chapter" data-level="11.3" data-path="charting-over-time-with-a-curated-dataset.html"><a href="charting-over-time-with-a-curated-dataset.html#barplots"><i class="fa fa-check"></i><b>11.3</b> Barplots</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="network-analysis-with-curated-seventeenth-century-dataset.html"><a href="network-analysis-with-curated-seventeenth-century-dataset.html"><i class="fa fa-check"></i><b>12</b> Network analysis with curated seventeenth-century dataset</a></li>
<li class="chapter" data-level="13" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html"><i class="fa fa-check"></i><b>13</b> Geocode and map newspaper titles</a><ul>
<li class="chapter" data-level="13.1" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#points"><i class="fa fa-check"></i><b>13.1</b> Points</a><ul>
<li class="chapter" data-level="13.1.1" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#drawing-a-background-map."><i class="fa fa-check"></i><b>13.1.1</b> Drawing a background map. `</a></li>
<li class="chapter" data-level="13.1.2" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#get-a-count-of-the-total-titles-for-each-city"><i class="fa fa-check"></i><b>13.1.2</b> Get a count of the total titles for each city</a></li>
<li class="chapter" data-level="13.1.3" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#get-a-list-of-points."><i class="fa fa-check"></i><b>13.1.3</b> Get a list of points.</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#choropleth-map"><i class="fa fa-check"></i><b>13.2</b> Choropleth map</a><ul>
<li class="chapter" data-level="13.2.1" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#which-libraries-are-needed"><i class="fa fa-check"></i><b>13.2.1</b> Which libraries are needed</a></li>
<li class="chapter" data-level="13.2.2" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#download-a-shapefile"><i class="fa fa-check"></i><b>13.2.2</b> Download a shapefile</a></li>
<li class="chapter" data-level="13.2.3" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#have-a-look-at-the-shapefile"><i class="fa fa-check"></i><b>13.2.3</b> Have a look at the shapefile</a></li>
<li class="chapter" data-level="13.2.4" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#count-the-general-area-of-coverage-field"><i class="fa fa-check"></i><b>13.2.4</b> Count the general area of coverage field</a></li>
<li class="chapter" data-level="13.2.5" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#change-some-of-the-names-to-fit-the-shapefile"><i class="fa fa-check"></i><b>13.2.5</b> Change some of the names to fit the shapefile</a></li>
<li class="chapter" data-level="13.2.6" data-path="geocode-and-map-newspaper-titles.html"><a href="geocode-and-map-newspaper-titles.html#section"><i class="fa fa-check"></i><b>13.2.6</b> </a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Part III: Examples</b></span></li>
<li class="chapter" data-level="14" data-path="text-mining.html"><a href="text-mining.html"><i class="fa fa-check"></i><b>14</b> Text mining</a><ul>
<li class="chapter" data-level="14.1" data-path="text-mining.html"><a href="text-mining.html#what-were-the-most-common-words-used-in-newspaper-titles-in-the-nineteenth-century_"><i class="fa fa-check"></i><b>14.1</b> What were the most common words used in newspaper titles in the nineteenth century?_</a><ul>
<li class="chapter" data-level="14.1.1" data-path="text-mining.html"><a href="text-mining.html#titles-dont-just-help-you-identity-a-newspaper-but-they-might-tell-you-a-little-bit-about-the-time-in-which-they-were-established.-with-a-bibliographic-list-of-all-our-uk-and-irish-titles-we-can-count-the-most-frequent-words-and-track-them-over-time-and-place-using-text-mining-and-data-analysis."><i class="fa fa-check"></i><b>14.1.1</b> Titles don’t just help you identity a newspaper, but they might tell you a little bit about the time in which they were established. With a bibliographic list of <em>all</em> our UK and Irish titles, we can count the most frequent words and track them over time and place, using text mining and data analysis.</a></li>
<li class="chapter" data-level="14.1.2" data-path="text-mining.html"><a href="text-mining.html#what-is-this-document"><i class="fa fa-check"></i><b>14.1.2</b> What is this document?</a></li>
<li class="chapter" data-level="14.1.3" data-path="text-mining.html"><a href="text-mining.html#how-about-differences-by-country"><i class="fa fa-check"></i><b>14.1.3</b> How about differences by country?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="term-frequencies.html"><a href="term-frequencies.html"><i class="fa fa-check"></i><b>15</b> Term Frequencies</a></li>
<li class="chapter" data-level="16" data-path="text-reuse.html"><a href="text-reuse.html"><i class="fa fa-check"></i><b>16</b> Text reuse</a></li>
<li class="chapter" data-level="17" data-path="sentiment-analysis.html"><a href="sentiment-analysis.html"><i class="fa fa-check"></i><b>17</b> Sentiment analysis</a></li>
<li class="chapter" data-level="18" data-path="existing-work.html"><a href="existing-work.html"><i class="fa fa-check"></i><b>18</b> Existing work</a></li>
<li class="chapter" data-level="19" data-path="further-reading.html"><a href="further-reading.html"><i class="fa fa-check"></i><b>19</b> Further reading</a></li>
<li class="chapter" data-level="20" data-path="accessing-newspaper-data-through-the-british-library.html"><a href="accessing-newspaper-data-through-the-british-library.html"><i class="fa fa-check"></i><b>20</b> Accessing newspaper data through the British Library</a><ul>
<li class="chapter" data-level="20.1" data-path="accessing-newspaper-data-through-the-british-library.html"><a href="accessing-newspaper-data-through-the-british-library.html#what-is-available"><i class="fa fa-check"></i><b>20.1</b> What is available?</a></li>
<li class="chapter" data-level="20.2" data-path="accessing-newspaper-data-through-the-british-library.html"><a href="accessing-newspaper-data-through-the-british-library.html#applying-for-support-from-bl-labs"><i class="fa fa-check"></i><b>20.2</b> Applying for support from BL Labs</a></li>
<li class="chapter" data-level="20.3" data-path="accessing-newspaper-data-through-the-british-library.html"><a href="accessing-newspaper-data-through-the-british-library.html#using-jupyterhub-in-the-reading-rooms"><i class="fa fa-check"></i><b>20.3</b> Using JupyterHub in the reading rooms</a></li>
<li class="chapter" data-level="20.4" data-path="accessing-newspaper-data-through-the-british-library.html"><a href="accessing-newspaper-data-through-the-british-library.html#taking-the-data-away-with-you"><i class="fa fa-check"></i><b>20.4</b> Taking the data away with you</a></li>
<li class="chapter" data-level="20.5" data-path="accessing-newspaper-data-through-the-british-library.html"><a href="accessing-newspaper-data-through-the-british-library.html#next-chapter-leads-on-to-ocr-formats."><i class="fa fa-check"></i><b>20.5</b> Next chapter leads on to OCR formats.</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Newspaper Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="geocode-and-map-newspaper-titles" class="section level1">
<h1><span class="header-section-number">13</span> Geocode and map newspaper titles</h1>
<p>R is also really good for creating maps, both for visualisations and for spatial analysis.</p>
<div id="points" class="section level2">
<h2><span class="header-section-number">13.1</span> Points</h2>
<p>Another thing we can do is create a map of all the titles. For this we’ll need three things</p>
<ul>
<li><p>A background map of the UK and Ireland</p></li>
<li><p>A count of the total titles for each city</p></li>
<li><p>A list of coordinates for all the cities. This last one is a little trickier than the other two, as I’ll explain. Without some manually editing we might end up with some slightly dodgy results. But let’s just see where we end up.</p></li>
</ul>
<div id="drawing-a-background-map." class="section level3">
<h3><span class="header-section-number">13.1.1</span> Drawing a background map. `</h3>
<p>Maps is a library for R which, unsurprisingly, contains some map data, including some high resolution maps of the world. To draw the map, first we install the library.</p>
<p><code>install.packages('maps')</code></p>
<p>Next we load two libraries to use: maps and ggplot2. We’ll use a function from ggplot2 called <code>map_data</code> to turn some data from the maps package into a dataframe, and then we’ll use some more plotting functions from ggplot2 to draw the map.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb72-2" data-line-number="2"><span class="kw">library</span>(maps)</a></code></pre></div>
<p>First we assign a name to the dataframe we’ll create with <code>map_data</code></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1">worldmap =<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&#39;world&#39;</span>)</a></code></pre></div>
<p>Take a look at the dataframe we’ve created:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="kw">head</span>(worldmap, <span class="dv">20</span>)</a></code></pre></div>
<pre><code>##         long      lat group order      region subregion
## 1  -69.89912 12.45200     1     1       Aruba      &lt;NA&gt;
## 2  -69.89571 12.42300     1     2       Aruba      &lt;NA&gt;
## 3  -69.94219 12.43853     1     3       Aruba      &lt;NA&gt;
## 4  -70.00415 12.50049     1     4       Aruba      &lt;NA&gt;
## 5  -70.06612 12.54697     1     5       Aruba      &lt;NA&gt;
## 6  -70.05088 12.59707     1     6       Aruba      &lt;NA&gt;
## 7  -70.03511 12.61411     1     7       Aruba      &lt;NA&gt;
## 8  -69.97314 12.56763     1     8       Aruba      &lt;NA&gt;
## 9  -69.91181 12.48047     1     9       Aruba      &lt;NA&gt;
## 10 -69.89912 12.45200     1    10       Aruba      &lt;NA&gt;
## 12  74.89131 37.23164     2    12 Afghanistan      &lt;NA&gt;
## 13  74.84023 37.22505     2    13 Afghanistan      &lt;NA&gt;
## 14  74.76738 37.24917     2    14 Afghanistan      &lt;NA&gt;
## 15  74.73896 37.28564     2    15 Afghanistan      &lt;NA&gt;
## 16  74.72666 37.29072     2    16 Afghanistan      &lt;NA&gt;
## 17  74.66895 37.26670     2    17 Afghanistan      &lt;NA&gt;
## 18  74.55899 37.23662     2    18 Afghanistan      &lt;NA&gt;
## 19  74.37217 37.15771     2    19 Afghanistan      &lt;NA&gt;
## 20  74.37617 37.13735     2    20 Afghanistan      &lt;NA&gt;
## 21  74.49796 37.05722     2    21 Afghanistan      &lt;NA&gt;</code></pre>
<p>It’s a big table with about 100,000 rows. Each row has a latitude and longitude, and a group. Each region and sub-region in the dataframe has its own group number. We’ll use a function <code>geom_polygon</code> which tells ggplot to draw a polygon (a bunch of connected lines) for each group, and display it.</p>
<p>With the <code>aes()</code>, x tells ggplot2 the longitude of each point, y the latitude, and group makes sure the polygons are grouped together correctly.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> worldmap, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group))</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<p>Right, it needs a <em>bit</em> of tweaking. First, we only want to plot points in the UK and Ireland. There’s obviously way too much map for this, so the first thing we should do is restrict it to a rectangle which includes those two countries.</p>
<p>We can do that with <code>coord_fixed()</code>. <code>coord_fixed()</code> is used to fix the aspect ratio of a coordinate system, but can be used to specify a bounding box by using two of its arguments: <code>xlim=</code> and <code>ylim=</code>. These each take a vector (a series of numbers) with two numbers. A vector is created using <code>c()</code>. Each number specifies the limits for that axis. So <code>xlim = c(0,10)</code> means <em>restrict the x-axis to 0 and 10</em>. The axes correspond to the lines of longitude (x) and latitude (y). We’ll restrict the x-axis to c(-10, 4) and the y-axis to c(54, 60) which should just about cover the UK and Ireland.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> worldmap, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb77-2" data-line-number="2"><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>,<span class="dv">3</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">59</span>))</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<p>We can also change the ratio of the coordinates using <code>coord_fixed()</code>. The default is 1, but by specifying a different one with the argument <code>ratio =</code>, that can be changed. Using <code>ratio = 1.3</code> results in a less squashed-looking map.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> worldmap, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb78-2" data-line-number="2"><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dt">ratio =</span> <span class="fl">1.3</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>,<span class="dv">3</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">59</span>))</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>A couple more things, which I’ll run through quickly.</p>
<p>We can specify fill and line colors usings <code>fill =</code> and <code>color =</code> inside <code>geom_polygon()</code> but <em>outside</em> <code>aes()</code>.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> worldmap, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group), <span class="dt">fill =</span> <span class="st">&#39;gray90&#39;</span>, <span class="dt">color =</span> <span class="st">&#39;black&#39;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dt">ratio =</span> <span class="fl">1.3</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>,<span class="dv">3</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">59</span>))</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<p>We probably don’t need the grids or panels in the background. We can get rid of these with <code>+ theme_void()</code>, but bear in mind we might need to add some theme elements back, manually.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> worldmap, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group), <span class="dt">fill =</span> <span class="st">&#39;gray90&#39;</span>, <span class="dt">color =</span> <span class="st">&#39;black&#39;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-2" data-line-number="2"><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dt">ratio =</span> <span class="fl">1.3</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>,<span class="dv">3</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">59</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_void</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
</div>
<div id="get-a-count-of-the-total-titles-for-each-city" class="section level3">
<h3><span class="header-section-number">13.1.2</span> Get a count of the total titles for each city</h3>
<p>This next bit uses some of the functions demonstrated in the introduction to R and the tidyverse, namely <code>group_by()</code> and <code>tally()</code>.</p>
<p>First load the rest of the tidyverse packages.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>Next, load the title list, which can be dowloaded here:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">title_list =<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;data/BritishAndIrishNewspapersTitleList_20191118.csv&#39;</span>)</a></code></pre></div>
<p>We can quite easily make a new data frame, which will just include each location and the total number of instances in the dataset.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1">location_counts =<span class="st"> </span>title_list <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb83-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(country_of_publication, general_area_of_coverage, coverage_city) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb83-3" data-line-number="3"><span class="st">  </span><span class="kw">tally</span>()</a></code></pre></div>
<p>Arranging these in descending order of their count shows how many of each we have:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1">location_counts <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb84-2" data-line-number="2"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n))</a></code></pre></div>
<pre><code>## # A tibble: 2,189 x 4
## # Groups:   country_of_publication, general_area_of_coverage [531]
##    country_of_publication general_area_of_coverage  coverage_city     n
##    &lt;chr&gt;                  &lt;chr&gt;                     &lt;chr&gt;         &lt;int&gt;
##  1 England                London                    London         5781
##  2 Ireland                Dublin (Ireland : County) Dublin          415
##  3 Scotland               Strathclyde               Glasgow         309
##  4 England                Greater Manchester        Manchester      265
##  5 England                West Midlands             Birmingham      260
##  6 England                Merseyside                Liverpool       220
##  7 England                Avon                      Bristol         175
##  8 Scotland               Lothian                   Edinburgh       162
##  9 England                South Yorkshire           Sheffield       133
## 10 England                Nottinghamshire           Nottingham      127
## # … with 2,179 more rows</code></pre>
</div>
<div id="get-a-list-of-points." class="section level3">
<h3><span class="header-section-number">13.1.3</span> Get a list of points.</h3>
<p>Well, we’ve cheated and made this one already, with lots of manual work.</p>
<p>We’ll load a dataset containing geocorrected points</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1">geocorrected =<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;data/geocorrected.csv&#39;</span>)</a></code></pre></div>
<p>This needs a little bit of pre-processing. First use a library called <code>snakecase</code> and a function called <code>to_snakecase()</code> to standardise the column names.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1"><span class="kw">library</span>(snakecase)</a>
<a class="sourceLine" id="cb87-2" data-line-number="2"><span class="kw">colnames</span>(geocorrected)  =<span class="st"> </span><span class="kw">to_snake_case</span>(<span class="kw">colnames</span>(geocorrected))</a></code></pre></div>
<p>Then make the coordinate columns numeric using <code>mutate()</code></p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1">geocorrected =<span class="st"> </span>geocorrected <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb88-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">wikilat =</span> <span class="kw">as.numeric</span>(wikilat)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb88-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">wikilon =</span> <span class="kw">as.numeric</span>(wikilon))</a></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion</code></pre>
<p>Last, change the NA values to the same format as the ones in the title list.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1">geocorrected =<span class="st"> </span>geocorrected <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb90-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">country_of_publication =</span> <span class="kw">replace</span>(country_of_publication, country_of_publication <span class="op">==</span><span class="st"> &#39;na&#39;</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">general_area_of_coverage =</span> <span class="kw">replace</span>(general_area_of_coverage, general_area_of_coverage <span class="op">==</span><span class="st"> &#39;na&#39;</span>, <span class="ot">NA</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb90-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">coverage_city =</span> <span class="kw">replace</span>(coverage_city, coverage_city <span class="op">==</span><span class="st"> &#39;na&#39;</span>, <span class="ot">NA</span>))</a></code></pre></div>
<p>Using <code>left_join()</code> we will merge these dataframes, joining up each set of location information to its coordinates and standardised name.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1">lc_with_geo =<span class="st"> </span>location_counts <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(geocorrected, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&#39;coverage_city&#39;</span> ,<span class="st">&#39;general_area_of_coverage&#39;</span>, <span class="st">&#39;country_of_publication&#39;</span>))</a></code></pre></div>
<p>Right, now we’re going to use <code>group_by()</code> and <code>tally()</code> again, this time on the the wikititle, wikilat and wikilon columns. This is because the wikititle is a standardised title, which means it will group together cities properly, rather than giving a different row for slightly different combinations of the three geographic information columns.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1">lc_with_geo_counts =<span class="st"> </span>lc_with_geo <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(wikititle, wikilat, wikilon) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tally</span>(n)</a></code></pre></div>
<p>OK, lc_with_geo_counts is what we want to plot. This contains the city title, coordinates and counts for all the relevant places in our dataset. But first we again need the map we created earlier.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> worldmap, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group), <span class="dt">fill =</span> <span class="st">&#39;gray90&#39;</span>, <span class="dt">color =</span> <span class="st">&#39;black&#39;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb93-2" data-line-number="2"><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dt">ratio =</span> <span class="fl">1.3</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>,<span class="dv">3</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">59</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb93-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_void</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
<p>Now we will plot the cities using <code>geom_point()</code> We’ll specify the <code>lc_with_geo_counts</code> as the argument to <code>data =</code> within <code>geom_point()</code>. The x axis position of each point is the longitude, and the y axis the latitude. We’ll also use the argument <code>size = n</code> within the <code>aes()</code>, to tell ggplot2 to size the points by the column n, which contains the counts for each of our locations, and the argument <code>alpha = .7</code> outside the <code>aes()</code>, to make the points more transparent and slightly easier to read overlapping ones.</p>
<p>One last thing we’ll add is <code>+scale_size_area()</code>. This sizes the points using their radius rather than diameter, which is a more correct way of representing numbers using circles!</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> worldmap, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group), <span class="dt">fill =</span> <span class="st">&#39;gray90&#39;</span>, <span class="dt">color =</span> <span class="st">&#39;black&#39;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb94-2" data-line-number="2"><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dt">ratio =</span> <span class="fl">1.3</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>,<span class="dv">3</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">59</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb94-3" data-line-number="3"><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">data =</span> lc_with_geo_counts, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">as.numeric</span>(wikilon), <span class="dt">y =</span> <span class="kw">as.numeric</span>(wikilat), <span class="dt">size =</span> n), <span class="dt">alpha =</span> <span class="fl">.7</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb94-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_size_area</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-72-1.png" width="672" /></p>
</div>
</div>
<div id="choropleth-map" class="section level2">
<h2><span class="header-section-number">13.2</span> Choropleth map</h2>
<div id="which-libraries-are-needed" class="section level3">
<h3><span class="header-section-number">13.2.1</span> Which libraries are needed</h3>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="kw">library</span>(sf)</a>
<a class="sourceLine" id="cb95-2" data-line-number="2"><span class="kw">library</span>(rgdal)</a>
<a class="sourceLine" id="cb95-3" data-line-number="3"><span class="kw">library</span>(broom)</a>
<a class="sourceLine" id="cb95-4" data-line-number="4"><span class="kw">library</span>(rgeos)</a></code></pre></div>
</div>
<div id="download-a-shapefile" class="section level3">
<h3><span class="header-section-number">13.2.2</span> Download a shapefile</h3>
<p><a href="https://data.gov.uk/dataset/0fb911e4-ca3a-4553-9136-c4fb069546f9/ceremonial-county-boundaries-of-england">From here</a></p>
</div>
<div id="have-a-look-at-the-shapefile" class="section level3">
<h3><span class="header-section-number">13.2.3</span> Have a look at the shapefile</h3>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1">england_shp =<span class="st"> </span><span class="kw">readOGR</span>(<span class="dt">dsn =</span> <span class="st">&quot;data/english_ceremonial_counties&quot;</span>, <span class="dt">layer =</span> <span class="st">&quot;English Ceremonial Counties&quot;</span>)</a></code></pre></div>
<pre><code>## OGR data source with driver: ESRI Shapefile 
## Source: &quot;/Users/yannryan/Desktop/r-projects/r-for-news-data/data/english_ceremonial_counties&quot;, layer: &quot;English Ceremonial Counties&quot;
## with 47 features
## It has 2 fields</code></pre>
<p>The next thing to do is use a library called broom and a function called <code>tidy()</code>. This turns the shapefile into a dataframe which can be read and plotted by ggplot2.</p>
<p>First change the projection:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1">pc &lt;-<span class="st"> </span><span class="kw">spTransform</span>( england_shp, <span class="kw">CRS</span>( <span class="st">&quot;+init=EPSG:4326&quot;</span> ) ) </a></code></pre></div>
<p>Then use <code>gSimplify()</code> to simplify it very slightly:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1">pc &lt;-<span class="st"> </span><span class="kw">gSimplify</span>(pc, <span class="dt">tol =</span> <span class="fl">0.00001</span>)</a></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1">pc_tidy =<span class="st"> </span>broom<span class="op">::</span><span class="kw">tidy</span>(pc, <span class="dt">region =</span> <span class="st">&#39;NAME&#39;</span>)</a></code></pre></div>
<p>Add back in the data, which gSimplify doesn’t keep:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1">pc_df &lt;-<span class="st"> </span>england_shp<span class="op">@</span>data</a>
<a class="sourceLine" id="cb101-2" data-line-number="2">pc &lt;-<span class="st"> </span>sp<span class="op">::</span><span class="kw">SpatialPolygonsDataFrame</span>(pc, pc_df)</a></code></pre></div>
<p>Finally, do the tidy again. It should work this time.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1">pc_tidy =<span class="st"> </span>broom<span class="op">::</span><span class="kw">tidy</span>(pc, <span class="dt">region =</span> <span class="st">&#39;NAME&#39;</span>)</a></code></pre></div>
<p><a href="https://gis.stackexchange.com/questions/243569/simplify-polygons-of-sf-object" class="uri">https://gis.stackexchange.com/questions/243569/simplify-polygons-of-sf-object</a></p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1">county_totals =<span class="st"> </span>title_list <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb103-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(general_area_of_coverage) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb103-3" data-line-number="3"><span class="st">  </span><span class="kw">tally</span>()</a></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1">pc_tidy =<span class="st"> </span>broom<span class="op">::</span><span class="kw">tidy</span>(pc, <span class="dt">region =</span> <span class="st">&#39;NAME&#39;</span>)</a></code></pre></div>
<p>Draw the map:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> pc_tidy, <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, <span class="dt">group =</span> group))</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
<p>Add in the counts using <code>left_join()</code></p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> pc_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb106-3" data-line-number="3"><span class="st">                 </span><span class="kw">left_join</span>(county_totals, </a>
<a class="sourceLine" id="cb106-4" data-line-number="4">                           <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&#39;id&#39;</span> =<span class="st"> &#39;general_area_of_coverage&#39;</span>)), </a>
<a class="sourceLine" id="cb106-5" data-line-number="5">               <span class="kw">aes</span>(<span class="dt">x =</span> long, <span class="dt">y =</span> lat, </a>
<a class="sourceLine" id="cb106-6" data-line-number="6">                   <span class="dt">fill =</span> n, <span class="dt">group =</span> group)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb106-7" data-line-number="7"><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb106-8" data-line-number="8"><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="fl">1.3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">scale_fill_viridis_c</span>()</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="kw">anti_join</span>(title_list <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2"><span class="st">            </span><span class="kw">filter</span>(country_of_publication <span class="op">==</span><span class="st"> &#39;England&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-3" data-line-number="3"><span class="st">            </span><span class="kw">group_by</span>(general_area_of_coverage) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-4" data-line-number="4"><span class="st">            </span><span class="kw">tally</span>(),pc_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-5" data-line-number="5"><span class="st">            </span><span class="kw">group_by</span>(id) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-6" data-line-number="6"><span class="st">            </span><span class="kw">tally</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-7" data-line-number="7"><span class="st">            </span><span class="kw">select</span>(id), <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&#39;general_area_of_coverage&#39;</span> =<span class="st"> &#39;id&#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb107-8" data-line-number="8"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n))</a></code></pre></div>
<pre><code>## # A tibble: 274 x 2
##    general_area_of_coverage     n
##    &lt;chr&gt;                    &lt;int&gt;
##  1 London                    5866
##  2 &lt;NA&gt;                       379
##  3 Humberside                 322
##  4 Avon                       321
##  5 Hereford &amp; Worcester       225
##  6 Cleveland                  122
##  7 Jersey                      33
##  8 Isle of Man                 31
##  9 Guernsey                    29
## 10 Great Britain                7
## # … with 264 more rows</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="kw">anti_join</span>(pc_tidy <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(id) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tally</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(id),title_list <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(country_of_publication <span class="op">==</span><span class="st"> &#39;England&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(general_area_of_coverage) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tally</span>(), <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&#39;id&#39;</span> =<span class="st"> &#39;general_area_of_coverage&#39;</span>)) </a></code></pre></div>
<pre><code>## # A tibble: 4 x 1
##   id               
##   &lt;chr&gt;            
## 1 County of Bristol
## 2 Greater London   
## 3 Herefordshire    
## 4 Rutland</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1">knitr<span class="op">::</span><span class="kw">kable</span>(</a>
<a class="sourceLine" id="cb111-2" data-line-number="2">  <span class="kw">head</span>(mtcars[, <span class="dv">1</span><span class="op">:</span><span class="dv">8</span>], <span class="dv">10</span>), <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb111-3" data-line-number="3">  <span class="dt">caption =</span> <span class="st">&#39;A table of the first 10 rows of the mtcars data.&#39;</span></a>
<a class="sourceLine" id="cb111-4" data-line-number="4">)</a></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-86">Table 13.1: </span>A table of the first 10 rows of the mtcars data.</caption>
<thead>
<tr class="header">
<th></th>
<th align="right">mpg</th>
<th align="right">cyl</th>
<th align="right">disp</th>
<th align="right">hp</th>
<th align="right">drat</th>
<th align="right">wt</th>
<th align="right">qsec</th>
<th align="right">vs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mazda RX4</td>
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160.0</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.620</td>
<td align="right">16.46</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td>Mazda RX4 Wag</td>
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160.0</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.875</td>
<td align="right">17.02</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td>Datsun 710</td>
<td align="right">22.8</td>
<td align="right">4</td>
<td align="right">108.0</td>
<td align="right">93</td>
<td align="right">3.85</td>
<td align="right">2.320</td>
<td align="right">18.61</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td>Hornet 4 Drive</td>
<td align="right">21.4</td>
<td align="right">6</td>
<td align="right">258.0</td>
<td align="right">110</td>
<td align="right">3.08</td>
<td align="right">3.215</td>
<td align="right">19.44</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td>Hornet Sportabout</td>
<td align="right">18.7</td>
<td align="right">8</td>
<td align="right">360.0</td>
<td align="right">175</td>
<td align="right">3.15</td>
<td align="right">3.440</td>
<td align="right">17.02</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td>Valiant</td>
<td align="right">18.1</td>
<td align="right">6</td>
<td align="right">225.0</td>
<td align="right">105</td>
<td align="right">2.76</td>
<td align="right">3.460</td>
<td align="right">20.22</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td>Duster 360</td>
<td align="right">14.3</td>
<td align="right">8</td>
<td align="right">360.0</td>
<td align="right">245</td>
<td align="right">3.21</td>
<td align="right">3.570</td>
<td align="right">15.84</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td>Merc 240D</td>
<td align="right">24.4</td>
<td align="right">4</td>
<td align="right">146.7</td>
<td align="right">62</td>
<td align="right">3.69</td>
<td align="right">3.190</td>
<td align="right">20.00</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td>Merc 230</td>
<td align="right">22.8</td>
<td align="right">4</td>
<td align="right">140.8</td>
<td align="right">95</td>
<td align="right">3.92</td>
<td align="right">3.150</td>
<td align="right">22.90</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td>Merc 280</td>
<td align="right">19.2</td>
<td align="right">6</td>
<td align="right">167.6</td>
<td align="right">123</td>
<td align="right">3.92</td>
<td align="right">3.440</td>
<td align="right">18.30</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
<div id="count-the-general-area-of-coverage-field" class="section level3">
<h3><span class="header-section-number">13.2.4</span> Count the general area of coverage field</h3>
</div>
<div id="change-some-of-the-names-to-fit-the-shapefile" class="section level3">
<h3><span class="header-section-number">13.2.5</span> Change some of the names to fit the shapefile</h3>
</div>
<div id="section" class="section level3">
<h3><span class="header-section-number">13.2.6</span> </h3>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="network-analysis-with-curated-seventeenth-century-dataset.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="text-mining.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
